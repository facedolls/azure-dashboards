{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "azureDashboardName": {
            "type": "String",
            "metadata": {
              "description": "The name of dasboard to create"
            }
        },
		"dashboardTitle": {
			"type": "String",
			"metadata": {
				"description": "The title of the dasboard"
			}
        },
		"appInsights_StoreFront": {
            "type": "String",
            "metadata": {
              "description": "The name of application insights"
            }
        }
    },
    "variables": {
		"public-appInsight": "[concat(resourceGroup().id, '/providers/microsoft.insights/components/', parameters('appInsights_StoreFront'))]"
	},
    "resources": [
        {
            "type": "Microsoft.Portal/dashboards",
			"apiVersion": "2019-01-01-preview",
            "name": "[parameters('azureDashboardName')]",
            "location": "[resourceGroup().location]",
            "tags": {
                "hidden-title": "[parameters('azureDashboardName')]"
            },
  "properties": {
    "lenses": {
      "0": {
        "order": 0,
        "parts": {
          "0": {
            "position": {
              "x": 0,
              "y": 0,
              "colSpan": 18,
              "rowSpan": 1
            },
            "metadata": {
              "inputs": [],
              "type": "Extension/HubsExtension/PartType/MarkdownPart",
              "settings": {
                "content": {
                  "settings": {
                    "content": "[parameters('dashboardTitle')]",
                    "title": "",
                    "subtitle": "",
                    "markdownUri": null
                  }
                }
              }
            }
          },
          "1": {
            "position": {
              "x": 0,
              "y": 1,
              "colSpan": 12,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  }
                },
                {
                  "name": "Query",
                  "value": "let timeRange = 1d;\nlet samples = 1000000;\nlet pageDurationThreshold = 3600s;\nlet allEvents = union pageViews\n| where timestamp > ago(timeRange);\nlet allInterestingEvents = allEvents;\nlet sampledSessions = materialize(allInterestingEvents\n| summarize by session_Id\n| sample samples\n| summarize makelist(session_Id, samples));\nlet data = allInterestingEvents\n| where session_Id in (sampledSessions)\n| project session_Id, timestamp, name\n| join kind= inner\n(\n    allEvents\n    | where session_Id in (sampledSessions)\n    | project session_Id, timestamp\n)\non session_Id\n| project session_Id, TimeDiff = timestamp  - timestamp1, name, timestamp\n| where TimeDiff > 0s and TimeDiff <= pageDurationThreshold\n| summarize SecondsSpentOnPage = min(TimeDiff) / 1s by session_Id, name, timestamp;\ndata\n| summarize Instances = count(), (Median, p75, p90) = percentiles(SecondsSpentOnPage, 50, 75, 90), Mean = avg(SecondsSpentOnPage) by name\n| extend rank = 2, name = strcat('* ', name)\n| union (data\n| summarize Instances = count(), (Median, p75, p90) = percentiles(SecondsSpentOnPage, 50, 75, 90), Mean = avg(SecondsSpentOnPage)\n| extend name = '* Overall', rank = 1)\n| order by rank asc, Median desc\n| project-away rank\n| project ['Page Name'] = name, ['Sampled Page Views'] = Instances, ['Median (seconds)'] = round(Median, 1), ['75th Percentile (seconds)'] = round(p75, 1), ['90th Percentile (seconds)'] = round(p90, 1), ['Mean (seconds)'] = round(Mean, 1)\n"
                },
                {
                  "name": "Version",
                  "value": "1.0"
                },
                {
                  "name": "PartTitle",
                  "value": "Analysis of Page Views"
                },
                {
                  "name": "PartSubTitle",
                  "value": ""
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components"
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsGrid"
                },
                {
                  "name": "Dimensions",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Analysis of Page Views"
                }
              }
            }
          },
          "2": {
            "position": {
              "x": 12,
              "y": 1,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "options",
                  "value": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "availabilityResults/availabilityPercentage",
                          "aggregationType": 4,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "displayName": "Availability"
                          }
                        }
                      ],
                      "title": "Average availability",
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        }
                      },
                      "openBladeOnClick": {
                        "openBlade": true,
                        "destinationBlade": {
                          "extensionName": "HubsExtension",
                          "bladeName": "ResourceMenuBlade",
                          "parameters": {
                            "id": "[variables('public-appInsight')]",
                            "menuid": "availability"
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "name": "sharedTimeRange",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/MonitorChartPart",
              "settings": {
                "content": {
                  "options": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "availabilityResults/availabilityPercentage",
                          "aggregationType": 4,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "displayName": "Availability"
                          }
                        }
                      ],
                      "title": "Average availability",
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        },
                        "disablePinning": true
                      },
                      "openBladeOnClick": {
                        "openBlade": true,
                        "destinationBlade": {
                          "extensionName": "HubsExtension",
                          "bladeName": "ResourceMenuBlade",
                          "parameters": {
                            "id": "[variables('public-appInsight')]",
                            "menuid": "availability"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "3": {
            "position": {
              "x": 0,
              "y": 5,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain = {TimeGrain};\\nlet dataset=customEvents\\n    | where timestamp {TimeRange}\\n    | where name == \\\"LoginFullResponseTime\\\"\\n    | extend durationSec = round(todouble(customDimensions.duration)/1000, 3);\\ndataset\\n| summarize SEC_AVG=avg(durationSec), SEC_MIN=min(durationSec), SEC_MAX=max(durationSec) by bin(timestamp, timeGrain)\\n//| render linechart with(title=\\\"Users login performance\\\", legend=visible)\\n| render timechart\\n\",\"size\":1,\"aggregation\":3,\"title\":\"Users login performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xAxis\":\"timestamp\",\"ySettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:21:13.274Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "value": "[resourceGroup().location]",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "4": {
            "position": {
              "x": 6,
              "y": 5,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=pageViews\\r\\n    | where timestamp {TimeRange}\\r\\n    | where name == \\\"HomePageLoadingTime\\\"\\r\\n    | extend duration = round(duration/1000,3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(duration), SEC_MIN=min(duration), SEC_MAX=max(duration) by bin(timestamp, timeGrain)\\r\\n//| summarize SEC=avg(duration) by timestamp\\r\\n| render linechart with(title=\\\"Users HomePage performance\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Users HomePage performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xAxis\":\"timestamp\",\"ySettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "5": {
            "position": {
              "x": 12,
              "y": 5,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=requests\\r\\n    | where timestamp {TimeRange}\\r\\n    | where name like \\\"HotApiCarts/CreateOrder\\\";\\r\\ndataset\\r\\n| summarize Count=count(name) by bin(timestamp, timeGrain)\\r\\n| render columnchart with(title=\\\"CreateOrder count \\\", ytitle='Count', ysplit=panels, legend=visible)\\r\\n\",\"size\":0,\"title\":\"CreateOrder count\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\"}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2021-01-13T11:27:47.388Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "6": {
            "position": {
              "x": 0,
              "y": 9,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=customEvents\\r\\n    | where timestamp {TimeRange}\\r\\n    | where name contains \\\"CartChanged\\\"\\r\\n    | extend duration = round(todouble(customDimensions.duration) / 1000, 3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(duration), SEC_MIN=min(duration), SEC_MAX=max(duration) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Users Cart operation performance\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Users Cart operation performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xAxis\":\"timestamp\",\"xSettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "7": {
            "position": {
              "x": 6,
              "y": 9,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=customEvents\\r\\n    | where timestamp {TimeRange}\\r\\n    | where name == \\\"OrderCreateResponseTime\\\"\\r\\n    | extend duration = round(todouble(customDimensions.duration) / 1000,3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(duration), SEC_MIN=min(duration), SEC_MAX=max(duration) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Users checkout performance\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Users checkout performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xAxis\":\"timestamp\",\"xSettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "8": {
            "position": {
              "x": 12,
              "y": 9,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=customEvents\\r\\n    | where timestamp {TimeRange}\\r\\n    | where name == \\\"CatalogLoadingTime\\\"\\r\\n    | extend duration = round(todouble(customDimensions.duration) / 1000,3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(duration), SEC_MIN=min(duration), SEC_MAX=max(duration) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Users Catalog browsing performance\\\",ytitle=\\\"Sec\\\")\",\"size\":0,\"aggregation\":3,\"title\":\"Users Catalog browsing performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xAxis\":\"timestamp\",\"xSettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "9": {
            "position": {
              "x": 0,
              "y": 13,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nunion pageViews, dependencies, customEvents\\r\\n| where timestamp {TimeRange}\\r\\n| where name == 'CheckoutButtonClick' or name == 'ProductItemClick' or name == 'BrandItemClick' or name == 'SearchKeyword' or name == 'CartTotal'\\r\\n| project operation_Id, timestamp, itemType, name, url, duration, client_Type, customDimensions, customMeasurements, user_Id\\r\\n| extend click = (name == 'CheckoutButtonClick')\\r\\n| summarize Click=count(click) by bin(timestamp, timeGrain)\\r\\n| render columnchart with(title=\\\"Checkout button click \\\", ytitle='Count', ysplit=panels, legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"CheckoutButtonClick\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\"}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "10": {
            "position": {
              "x": 6,
              "y": 13,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "options",
                  "value": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "users/count",
                          "aggregationType": 5,
                          "namespace": "microsoft.insights/components/kusto",
                          "metricVisualization": {
                            "displayName": "Users"
                          }
                        }
                      ],
                      "title": "Unique Users",
                      "titleKind": 1,
                      "visualization": {
                        "chartType": 1,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        }
                      }
                    },
                    "version": 2
                  }
                },
                {
                  "name": "sharedTimeRange",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/MonitorChartPart",
              "settings": {
                "content": {
                  "options": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "users/count",
                          "aggregationType": 5,
                          "namespace": "microsoft.insights/components/kusto",
                          "metricVisualization": {
                            "displayName": "Users"
                          }
                        }
                      ],
                      "title": "Unique Users",
                      "titleKind": 1,
                      "visualization": {
                        "chartType": 1,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        },
                        "disablePinning": true
                      }
                    },
                    "version": 2
                  }
                }
              }
            }
          },
          "11": {
            "position": {
              "x": 12,
              "y": 13,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=customEvents\\r\\n    | where timestamp {TimeRange}\\r\\n    | where name == \\\"OrderCreateFullResponseTime\\\"\\r\\n    | extend duration = round(todouble(customDimensions.duration) / 1000,3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(duration), SEC_MIN=min(duration), SEC_MAX=max(duration) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Users create order performance\\\", ytitle=\\\"Sec\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Users create order performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xSettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "12": {
            "position": {
              "x": 0,
              "y": 17,
              "colSpan": 12,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  }
                },
                {
                  "name": "Query",
                  "value": "let start = startofday(ago(1d));\nunion customEvents, pageViews\n| where timestamp >= start\n| where name in ('*') or ('*' in ('*')) or ('#' in ('*') and itemType == 'pageView') or ('&' in ('*') and itemType == 'customEvent')\n| summarize Metric = dcount(session_Id) by bin(timestamp, 2h)\n| extend Hour = hourofday(timestamp), WeekDay = dayofweek(timestamp)\n| where 'No' == 'No' or (WeekDay != 0d and WeekDay != 6d)\n| extend HourDisplay = case(Hour == 0, '12am', Hour < 12, strcat(Hour, 'am'), Hour == 12, '12pm', strcat(Hour - 12, 'pm'))\n| extend Day = strcat(monthofyear(timestamp), '/', dayofmonth(timestamp), ' - ', case(WeekDay == 0d, 'Sun', WeekDay == 1d, 'Mon', WeekDay == 2d, 'Tue', WeekDay == 3d, 'Wed', WeekDay == 4d, 'Thu', WeekDay == 5d, 'Fri', 'Sat'))\n| order by Hour asc\n| extend Day1 = bin(timestamp, 1d)\n| project-away timestamp, WeekDay, Hour\n| serialize\n| evaluate pivot(HourDisplay, sum(Metric))\n| order by Day1 asc\n| project-away Day1\n"
                },
                {
                  "name": "Version",
                  "value": "1.0"
                },
                {
                  "name": "PartTitle",
                  "value": "Usage by hours of the day"
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appInsights_StoreFront')]"
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components"
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsGrid"
                },
                {
                  "name": "Dimensions",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Usage by hours of the day",
                  "GridColumnsWidth": {
                    "Day": "72px",
                    "12am": "70px",
                    "2am": "64px",
                    "4am": "64px",
                    "6am": "64px",
                    "8am": "64px",
                    "10am": "68px",
                    "12pm": "68px",
                    "2pm": "64px",
                    "4pm": "64px",
                    "6pm": "64px",
                    "8pm": "64px",
                    "10pm": "68px"
                  }
                }
              }
            }
          },
          "13": {
            "position": {
              "x": 12,
              "y": 17,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  },
                  "isOptional": true
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "client_CountryOrRegion",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Users",
                        "type": "long"
                      }
                    ],
                    "splitBy": [
                      {
                        "name": "client_City",
                        "type": "string"
                      }
                    ],
                    "aggregation": "Sum"
                  },
                  "isOptional": true
                },
                {
                  "name": "Version",
                  "value": "1.0",
                  "isOptional": true
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components",
                  "isOptional": true
                },
                {
                  "name": "TimeRange",
                  "value": "P1D",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "DraftRequestParameters",
                  "isOptional": true
                },
                {
                  "name": "Query",
                  "value": "union pageViews, customEvents\n| where timestamp between((datetime(2020))..now())\n| where client_City != ''\n| summarize Users=dcount(user_Id) by client_City, client_CountryOrRegion, bin(timestamp, 1h)\n| order by timestamp asc\n| render barchart\n\n",
                  "isOptional": true
                },
                {
                  "name": "ControlType",
                  "value": "FrameControlChart",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "value": "StackedColumn",
                  "isOptional": true
                },
                {
                  "name": "PartTitle",
                  "value": "Analytics",
                  "isOptional": true
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appInsights_StoreFront')]",
                  "isOptional": true
                },
                {
                  "name": "Scope",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/Microsoft_OperationsManagementSuite_Workspace/PartType/LogsDashboardPart",
              "settings": {
                "content": {
                  "PartTitle": "Users per Country / City"
                }
              }
            }
          },
          "14": {
            "position": {
              "x": 0,
              "y": 21,
              "colSpan": 12,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  }
                },
                {
                  "name": "Query",
                  "value": "let apdexThreshhold = toint('63');\nlet failureThreshhold = 1;\nlet apdexData = pageViews\n| where timestamp > ago(1d)\n| where name in ('*') or '*' in ('*')\n| extend success = columnifexists('success', true)\n| extend Failure = iff('ConsiderFailures' == 'ConsiderFailures' and success == false, 1, 0)\n| extend InterestingDimension = iff(isempty(name)== true, 'Unknown', name)\n| where InterestingDimension in ('*') or '*' in ('*')\n| summarize AverageDuration = avg(duration), Failures = sum(Failure) by user_Id, bin(timestamp, 30m), InterestingDimension\n| extend UserExperience = case(AverageDuration <= apdexThreshhold, 'Satisfied', AverageDuration <= 4 * apdexThreshhold, 'Tolerating', 'Frustrated')\n| extend UserExperience = case(Failures >= failureThreshhold, \"Frustrated\", UserExperience)\n| summarize Satisfied = countif(UserExperience == 'Satisfied'), Tolerating = countif(UserExperience == 'Tolerating'), Total = count() by timestamp, InterestingDimension\n| project timestamp, ApdexScore = (Satisfied + (Tolerating / 2.0)) / Total, Users = Total, InterestingDimension;\nlet pageRelevance = apdexData\n| summarize [\"Apdex Score\"] = avg(ApdexScore), Users=sum(Users) by InterestingDimension\n| extend Relevance = iff([\"Apdex Score\"] == 0, 1.0 * Users * Users, Users / [\"Apdex Score\"])\n| order by Relevance desc\n| project InterestingDimension\n| take 7;\napdexData\n| join kind = leftouter (pageRelevance) on InterestingDimension\n| extend InterestingDimension = iff(isempty(InterestingDimension1) == true, 'Other', InterestingDimension)\n| project timestamp, ApdexScore, Users, InterestingDimension \n| summarize ApdexScore = avg(ApdexScore) by timestamp, InterestingDimension\n| extend ApdexScore = round(ApdexScore, 3)\n"
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "timestamp",
                      "type": "datetime"
                    },
                    "yAxis": [
                      {
                        "name": "ApdexScore",
                        "type": "real"
                      }
                    ],
                    "splitBy": [
                      {
                        "name": "InterestingDimension",
                        "type": "string"
                      }
                    ],
                    "aggregation": "Sum"
                  }
                },
                {
                  "name": "Version",
                  "value": "1.0"
                },
                {
                  "name": "PartTitle",
                  "value": "Apdex Score"
                },
                {
                  "name": "PartSubTitle",
                  "value": ""
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components"
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsChart"
                },
                {
                  "name": "SpecificChart",
                  "value": "Bar"
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Apdex Score"
                }
              }
            }
          },
          "15": {
            "position": {
              "x": 12,
              "y": 21,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  }
                },
                {
                  "name": "Query",
                  "value": "union pageViews,customEvents\n| where timestamp between((datetime(2020))..now())\n| summarize Users=dcount(user_Id) by client_Browser , bin(timestamp, 1h)\n| order by timestamp asc\n| render barchart\n"
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "client_Browser",
                      "type": "string"
                    },
                    "yAxis": [
                      {
                        "name": "Users",
                        "type": "long"
                      }
                    ],
                    "splitBy": [],
                    "aggregation": "Sum"
                  }
                },
                {
                  "name": "Version",
                  "value": "1.0"
                },
                {
                  "name": "PartTitle",
                  "value": "Users per Browser"
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appInsights_StoreFront')]"
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components"
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsDonut"
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "SpecificChart",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Users per Browser"
                }
              }
            }
          },
          "16": {
            "position": {
              "x": 0,
              "y": 25,
              "colSpan": 12,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  }
                },
                {
                  "name": "Query",
                  "value": "let apdexThreshhold = toint('63');\nlet failureThreshhold = 1;\npageViews\n| where timestamp > ago(1d)\n| where name in ('*') or '*' in ('*')\n| extend success = columnifexists('success', true)\n| extend Failure = iff('ConsiderFailures' == 'ConsiderFailures' and success == false, 1, 0)\n| extend InterestingDimension = iff(isempty(name)== true, 'Unknown', name)\n| where InterestingDimension in ('*') or '*' in ('*')\n| summarize AverageDuration = avg(duration), Failures = sum(Failure) by user_Id, bin(timestamp, 30m)\n| extend UserExperience = case(AverageDuration <= apdexThreshhold, 'Satisfied', AverageDuration <= 4 * apdexThreshhold, 'Tolerating', 'Frustrated')\n| extend UserExperience = case(Failures >= failureThreshhold, \"Frustrated\", UserExperience)\n| summarize count() by UserExperience, timestamp\n"
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "timestamp",
                      "type": "datetime"
                    },
                    "yAxis": [
                      {
                        "name": "count_",
                        "type": "long"
                      }
                    ],
                    "splitBy": [
                      {
                        "name": "UserExperience",
                        "type": "string"
                      }
                    ],
                    "aggregation": "Sum"
                  }
                },
                {
                  "name": "Version",
                  "value": "1.0"
                },
                {
                  "name": "PartTitle",
                  "value": "Quality Trends"
                },
                {
                  "name": "PartSubTitle",
                  "value": ""
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components"
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsChart"
                },
                {
                  "name": "SpecificChart",
                  "value": "Bar"
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Quality Trends"
                }
              }
            }
          },
          "17": {
            "position": {
              "x": 12,
              "y": 25,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  }
                },
                {
                  "name": "Query",
                  "value": "union pageViews,customEvents\n| where timestamp between((datetime(2020))..now())\n| summarize Users=dcount(user_Id) by client_OS , bin(timestamp, 1h)\n| order by timestamp asc\n| render barchart\n"
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "timestamp",
                      "type": "datetime"
                    },
                    "yAxis": [
                      {
                        "name": "Users",
                        "type": "long"
                      }
                    ],
                    "splitBy": [
                      {
                        "name": "client_OS",
                        "type": "string"
                      }
                    ],
                    "aggregation": "Sum"
                  }
                },
                {
                  "name": "Version",
                  "value": "1.0"
                },
                {
                  "name": "PartTitle",
                  "value": "Users per Devices"
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appInsights_StoreFront')]"
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components"
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsChart"
                },
                {
                  "name": "SpecificChart",
                  "value": "Bar"
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Users per Devices"
                }
              }
            }
          },
          "18": {
            "position": {
              "x": 0,
              "y": 29,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "sharedTimeRange",
                  "isOptional": true
                },
                {
                  "name": "options",
                  "value": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "requests/count",
                          "aggregationType": 7,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "DisplayName": "Server requests"
                          }
                        }
                      ],
                      "title": "Server requests",
                      "titleKind": 2,
                      "visualization": {
                        "chartType": 2
                      },
                      "openBladeOnClick": {
                        "openBlade": true,
                        "destinationBlade": {
                          "bladeName": "ResourceMenuBlade",
                          "parameters": {
                            "id": "[variables('public-appInsight')]",
                            "menuid": "performance"
                          },
                          "extensionName": "HubsExtension",
                          "options": {
                            "parameters": {
                              "id": "[variables('public-appInsight')]",
                              "menuid": "performance"
                            }
                          }
                        }
                      }
                    }
                  },
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/MonitorChartPart",
              "settings": {
                "content": {
                  "options": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "requests/count",
                          "aggregationType": 7,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "DisplayName": "Server requests"
                          }
                        }
                      ],
                      "title": "Server requests",
                      "titleKind": 2,
                      "visualization": {
                        "chartType": 2,
                        "disablePinning": true
                      },
                      "openBladeOnClick": {
                        "openBlade": true,
                        "destinationBlade": {
                          "bladeName": "ResourceMenuBlade",
                          "parameters": {
                            "id": "[variables('public-appInsight')]",
                            "menuid": "performance"
                          },
                          "extensionName": "HubsExtension",
                          "options": {
                            "parameters": {
                              "id": "[variables('public-appInsight')]",
                              "menuid": "performance"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "19": {
            "position": {
              "x": 6,
              "y": 29,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "options",
                  "value": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "requests/failed",
                          "aggregationType": 7,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "displayName": "Failed requests",
                            "color": "#EC008C"
                          }
                        }
                      ],
                      "title": "Failed requests",
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        }
                      },
                      "openBladeOnClick": {
                        "openBlade": true,
                        "destinationBlade": {
                          "extensionName": "HubsExtension",
                          "bladeName": "ResourceMenuBlade",
                          "parameters": {
                            "id": "[variables('public-appInsight')]",
                            "menuid": "failures"
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "name": "sharedTimeRange",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/MonitorChartPart",
              "settings": {
                "content": {
                  "options": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "requests/failed",
                          "aggregationType": 7,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "displayName": "Failed requests",
                            "color": "#EC008C"
                          }
                        }
                      ],
                      "title": "Failed requests",
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        },
                        "disablePinning": true
                      },
                      "openBladeOnClick": {
                        "openBlade": true,
                        "destinationBlade": {
                          "extensionName": "HubsExtension",
                          "bladeName": "ResourceMenuBlade",
                          "parameters": {
                            "id": "[variables('public-appInsight')]",
                            "menuid": "failures"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "20": {
            "position": {
              "x": 12,
              "y": 29,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": {
                    "SubscriptionId": "[subscription().subscriptionId]",
                    "ResourceGroup": "[resourceGroup().name]",
                    "Name": "[parameters('appInsights_StoreFront')]",
                    "ResourceId": "[variables('public-appInsight')]"
                  }
                },
                {
                  "name": "Query",
                  "value": "union pageViews\n| where timestamp between((datetime(2020))..now())\n| summarize Users=dcount(user_Id) by tostring(parseurl(url)[\"Path\"]) , bin(timestamp, 1h)\n| order by timestamp asc\n| render barchart\n"
                },
                {
                  "name": "Dimensions",
                  "value": {
                    "xAxis": {
                      "name": "timestamp",
                      "type": "datetime"
                    },
                    "yAxis": [
                      {
                        "name": "Users",
                        "type": "long"
                      }
                    ],
                    "splitBy": [
                      {
                        "name": "Path",
                        "type": "string"
                      }
                    ],
                    "aggregation": "Sum"
                  }
                },
                {
                  "name": "Version",
                  "value": "1.0"
                },
                {
                  "name": "PartTitle",
                  "value": "Users per Page View"
                },
                {
                  "name": "PartSubTitle",
                  "value": "[parameters('appInsights_StoreFront')]"
                },
                {
                  "name": "resourceTypeMode",
                  "value": "components"
                },
                {
                  "name": "ControlType",
                  "value": "AnalyticsChart"
                },
                {
                  "name": "SpecificChart",
                  "value": "Bar"
                },
                {
                  "name": "TimeRange",
                  "isOptional": true
                },
                {
                  "name": "DashboardId",
                  "isOptional": true
                },
                {
                  "name": "PartId",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
              "settings": {
                "content": {
                  "PartTitle": "Users per Page View"
                }
              }
            }
          },
          "21": {
            "position": {
              "x": 0,
              "y": 33,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "options",
                  "value": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "performanceCounters/processCpuPercentage",
                          "aggregationType": 3,
                          "namespace": "microsoft.insights/components/kusto",
                          "metricVisualization": {
                            "displayName": "CPU utilization"
                          }
                        }
                      ],
                      "title": "CPU utilization",
                      "titleKind": 1,
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        }
                      }
                    },
                    "version": 2
                  }
                },
                {
                  "name": "sharedTimeRange",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/MonitorChartPart",
              "settings": {
                "content": {
                  "options": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "performanceCounters/processCpuPercentage",
                          "aggregationType": 3,
                          "namespace": "microsoft.insights/components/kusto",
                          "metricVisualization": {
                            "displayName": "CPU utilization"
                          }
                        }
                      ],
                      "title": "CPU utilization",
                      "titleKind": 1,
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        },
                        "disablePinning": true
                      }
                    },
                    "version": 2
                  }
                }
              }
            }
          },
          "22": {
            "position": {
              "x": 6,
              "y": 33,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "options",
                  "value": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "performanceCounters/memoryAvailableBytes",
                          "aggregationType": 4,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "displayName": "Available memory"
                          }
                        }
                      ],
                      "title": "Average available memory",
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        }
                      }
                    }
                  }
                },
                {
                  "name": "sharedTimeRange",
                  "isOptional": true
                }
              ],
              "type": "Extension/HubsExtension/PartType/MonitorChartPart",
              "settings": {
                "content": {
                  "options": {
                    "chart": {
                      "metrics": [
                        {
                          "resourceMetadata": {
                            "id": "[variables('public-appInsight')]"
                          },
                          "name": "performanceCounters/memoryAvailableBytes",
                          "aggregationType": 4,
                          "namespace": "microsoft.insights/components",
                          "metricVisualization": {
                            "displayName": "Available memory"
                          }
                        }
                      ],
                      "title": "Average available memory",
                      "visualization": {
                        "chartType": 2,
                        "legendVisualization": {
                          "isVisible": true,
                          "position": 2,
                          "hideSubtitle": false
                        },
                        "axisVisualization": {
                          "x": {
                            "isVisible": true,
                            "axisType": 2
                          },
                          "y": {
                            "isVisible": true,
                            "axisType": 1
                          }
                        },
                        "disablePinning": true
                      }
                    }
                  }
                }
              }
            }
          },
          "23": {
            "position": {
              "x": 12,
              "y": 33,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=requests\\r\\n    | where timestamp {TimeRange}\\r\\n    | where operation_Name !has \\\"GET /hubs\\\"\\r\\n    | extend durationSec = round(duration/1000,2);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(durationSec), SEC_MAX=max(durationSec) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Average execution time\\\", ytitle=\\\"Sec\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Average execution time\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xSettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2021-01-15T04:31:53.337Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "value": "[resourceGroup().location]",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "24": {
            "position": {
              "x": 0,
              "y": 37,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=requests\\r\\n    | where timestamp {TimeRange}\\r\\n    | where operation_Name like \\\"POST HotApiSecurityTokens/GenerateTokens\\\"\\r\\n    | extend durationSec = round(duration/1000,3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(durationSec), SEC_MIN=min(durationSec), SEC_MAX=max(durationSec) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Login page performance\\\", ytitle=\\\"Sec\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Login page performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xAxis\":\"timestamp\",\"xSettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}},\"mapSettings\":{\"locInfo\":\"LatLong\",\"sizeSettings\":\"SEC\",\"sizeAggregation\":\"Sum\",\"legendMetric\":\"SEC\",\"legendAggregation\":\"Sum\",\"itemColorSettings\":{\"type\":\"heatmap\",\"colorAggregation\":\"Sum\",\"nodeColorField\":\"SEC\",\"heatmapPalette\":\"greenRed\"}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "25": {
            "position": {
              "x": 6,
              "y": 37,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=requests\\r\\n    | where timestamp {TimeRange}\\r\\n    | where operation_Name like \\\"PUT HotApiCarts/ReplaceLineItems\\\"\\r\\n    | extend duration = round(duration / 1000,3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(duration), SEC_MIN=min(duration), SEC_MAX=max(duration) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Cart opertation performance\\\", ytitle=\\\"Sec\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Cart opertation performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\",\"chartSettings\":{\"xAxis\":\"timestamp\",\"xSettings\":{\"numberFormatSettings\":{\"unit\":0,\"options\":{\"style\":\"decimal\",\"useGrouping\":true}}}}}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          },
          "26": {
            "position": {
              "x": 12,
              "y": 37,
              "colSpan": 6,
              "rowSpan": 4
            },
            "metadata": {
              "inputs": [
                {
                  "name": "ComponentId",
                  "value": "[variables('public-appInsight')]",
                  "isOptional": true
                },
                {
                  "name": "TimeContext",
                  "value": null,
                  "isOptional": true
                },
                {
                  "name": "ResourceIds",
                  "value": [
                    "[variables('public-appInsight')]"
                  ],
                  "isOptional": true
                },
                {
                  "name": "ConfigurationId",
                  "value": "d9ad5faa-950d-46a0-a87c-1c516fd61e40",
                  "isOptional": true
                },
                {
                  "name": "Type",
                  "value": "workbook",
                  "isOptional": true
                },
                {
                  "name": "GalleryResourceType",
                  "value": "microsoft.insights/components",
                  "isOptional": true
                },
                {
                  "name": "PinName",
                  "value": "[parameters('azureDashboardName')]",
                  "isOptional": true
                },
                {
                  "name": "StepSettings",
                  "value": "{\"version\":\"KqlItem/1.0\",\"query\":\"let timeGrain={TimeGrain};\\r\\nlet dataset=requests\\r\\n    | where timestamp {TimeRange}\\r\\n    | where operation_Name like \\\"POST HotApiCarts/CreateOrder\\\"\\r\\n    | extend duration = round(duration / 1000,3);\\r\\ndataset\\r\\n| summarize SEC_AVG=avg(duration), SEC_MIN=min(duration), SEC_MAX=max(duration) by bin(timestamp, timeGrain)\\r\\n| render linechart with(title=\\\"Create order performance\\\", ytitle=\\\"Sec\\\", legend=visible)\\r\\n\",\"size\":0,\"aggregation\":3,\"title\":\"Create order performance\",\"timeContext\":{\"durationMs\":2592000000},\"queryType\":0,\"resourceType\":\"microsoft.insights/components\"}",
                  "isOptional": true
                },
                {
                  "name": "ParameterValues",
                  "value": {
                    "TimeRange": {
                      "type": 4,
                      "value": {
                        "durationMs": 2592000000,
                        "createdTime": "2020-12-22T16:22:40.04Z",
                        "isInitialTime": false,
                        "grain": 1,
                        "useDashboardTimeRange": false
                      },
                      "formattedValue": "Last 30 days",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "Last 30 days",
                      "displayName": "TimeRange"
                    },
                    "TimeGrain": {
                      "type": 1,
                      "value": "15min",
                      "formattedValue": "15min",
                      "isPending": false,
                      "isWaiting": false,
                      "isFailed": false,
                      "labelValue": "15min",
                      "displayName": "TimeGrain"
                    }
                  },
                  "isOptional": true
                },
                {
                  "name": "Location",
                  "isOptional": true
                }
              ],
              "type": "Extension/AppInsightsExtension/PartType/PinnedNotebookQueryPart"
            }
          }
        }
      }
    },
    "metadata": {
      "model": {
        "timeRange": {
          "value": {
            "relative": {
              "duration": 24,
              "timeUnit": 1
            }
          },
          "type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"
        },
        "filterLocale": {
          "value": "en-us"
        },
        "filters": {
          "value": {
            "MsPortalFx_TimeRange": {
              "model": {
                "format": "utc",
                "granularity": "auto",
                "relative": "24h"
              },
              "displayCache": {
                "name": "UTC Time",
                "value": "Past 24 hours"
              },
              "filteredPartIds": [
              ]
            }
          }
        }
      }
    }
  }
        }
    ]
}